<div class="payment-container">
  <div class="billing-section">
    <h2>ðŸ§¾ DirecciÃ³n de facturaciÃ³n</h2>

    <label>Pais</label>
    <select [(ngModel)]="billingData.country">
      <option>Colombia</option>
      <option>PerÃº</option>
      <option>Chile</option>
      <option>Argentina</option>
    </select>

    <h2>ðŸ’³ MÃ©todo de pago</h2>

    <div class="card-box">
      <label>NÃºmero de tarjeta</label>
      <input type="text" placeholder="1234 5678 9012 3456" [(ngModel)]="billingData.cardNumber" maxlength="19">

      <div class="row">
        <div>
          <label>Fecha de vencimiento</label>
          <input type="text" placeholder="MM/AA" [(ngModel)]="billingData.expiryDate" maxlength="5">
        </div>
        <div>
          <label>CVC/CVV</label>
          <input type="text" placeholder="CVC" [(ngModel)]="billingData.cvc" maxlength="4">
        </div>
      </div>

      <label>Nombre en la tarjeta</label>
      <input type="text" placeholder="Nombre" [(ngModel)]="billingData.cardName">

      <div class="save-card">
        <input type="checkbox" [(ngModel)]="billingData.saveCard">
        <span>Guardar esta tarjeta para compras futuras</span>
      </div>
    </div>

    <h3>Otros mÃ©todos</h3>
    <div class="other-methods">
      <button class="method">Google Pay</button>
      <button class="method">PayPal</button>
      <button class="method">Mercado Pago</button>
    </div>
  </div>

  <div class="summary-section" *ngIf="!loading && course; else loadingSummary">
    <h2>ðŸ›’ Resumen del pedido</h2>
    <div class="summary-box">
      <h3 class="course-title">{{ course.title }}</h3>
      <p class="price-line">
        Precio original: <span>${{ format(course.price) }} COP</span>
      </p>
      <p class="price-line" *ngIf="discountPercent() != null">
        Descuento ({{ discountPercent() }}%): <span class="discount">- ${{ format(discountAmount()) }} COP</span>
      </p>
      <h3 class="total">Total: <span>${{ format(finalPrice()) }} COP</span></h3>
      <button class="pay-btn" (click)="processPurchase()" [disabled]="processing">
        {{ processing ? 'Procesando...' : 'Pagar $' + format(finalPrice()) + ' COP' }}
      </button>
      <p class="refund">GarantÃ­a de reembolso por 30 dÃ­as âœ”</p>
    </div>
  </div>
  <ng-template #loadingSummary>
    <div class="summary-section"><p>Cargando resumen...</p><p *ngIf="error" class="error">{{ error }}</p></div>
  </ng-template>
</div>
